{"version":3,"sources":["webpack:///./src/utils/useSelection.js","webpack:///./src/components/share-tooltip/tooltip-helpers.js","webpack:///./src/components/share-tooltip/share-tooltip.js","webpack:///./src/templates/blog-post.js"],"names":["useSelection","useState","selected","setSelected","useEffect","isSubscribed","document","onselectionchange","text","getSelection","selection","toString","type","createRange","createShareLink","title","description","pageUrl","TooltipContainer","styled","div","LinksContainer","props","location","top","left","RotatedSquare","ShareTooltip","postTitle","postDescription","setLocation","setPageUrl","supported","navigator","shareApi","setShareApi","window","href","share","clicked","position","documentElement","scrollTop","body","querySelector","length","rect","getRangeAt","getBoundingClientRect","width","shareLink","e","preventDefault","url","currentTarget","open","className","onClick","style","marginTop","color","aria-label","role","pageQuery","BlogPostTemplate","data","pageContext","post","markdownRemark","siteTitle","site","siteMetadata","previous","next","frontmatter","excerpt","rhythm","marginBottom","scale","display","date","dangerouslySetInnerHTML","__html","html","flexWrap","justifyContent","listStyle","padding","to","fields","slug","rel"],"mappings":"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","file":"component---src-templates-blog-post-js-8fe6d18c29b7bcfa81f1.js","sourcesContent":["/**\n * license: MIT\n * author: Luis H. Ball Jr. <luisball@hey.com>\n * \n * React hook that returns selected text and Selection object.\n * Note: the selection object does not log but is present.\n * \n * For more on how this works, read the Window.getSelection() documentation:\n * https://developer.mozilla.org/en-US/docs/Web/API/Window/getSelection\n */\n\nimport { useState, useEffect } from 'react';\n\nexport const useSelection = () => {\n    const [selected, setSelected] = useState()\n\n    const handleSelectionChange = () => {\n        let selection;\n        let text = '';\n\n        if (document.getSelection) {\n            selection = document.getSelection();\n            text = selection.toString();\n        } else if (document.selection && document.selection.type !== 'Control') {\n            selection = document.selection.createRange();\n            text = selection.text;\n        }\n\n        setSelected({ text, selection })\n    };\n\n    useEffect(() => {\n        // use boolean to 'unsubscribe' event listener on dismount\n        let isSubscribed = true;\n        document.onselectionchange = () => isSubscribed && handleSelectionChange();\n\n        return () => isSubscribed = false;\n    }, [])\n\n    return selected;\n}","/*!\n* license: MIT\n* Heavily inspired by, Share Selected Text\n* url: https://github.com/VincentLoy/share-selected-text\n* author: Vincent Loy <vincent.loy1@gmail.com>\n* adapted for personal use by: Luis H. Ball Jr. <luisball@hey.com>\n*/\n\nimport styled from 'styled-components'\n// const LIGHT_BLUE = '#6CB4EE'\n// const CYAN = '#00FFFF';\nconst DALLAS_BLUE = '#041E42';\nconst DALLAS_BLUE_TRANSPARENT = '#041e4254';\n\n// helpers\n// accepts string designating link type, returns link url\nexport const createShareLink = (type, title, description, text, pageUrl) => {\n    if (!text) { return '' }\n\n    const twitterUrl = `https://twitter.com/intent/tweet?url=${pageUrl}&text=${description}:\"${text}\"&via=luishbjr1`;\n    const emailUrl = `mailto:name@email.com?subject=${title}&body=\"${text}\"%0D%0A...%0D%0A${description}, ${pageUrl}`;\n    const shareUrl =  type === 'twitter' ? twitterUrl : emailUrl;\n\n    return shareUrl;\n};\n\n// styled components\nexport const TooltipContainer = styled.div`\n    position: absolute;\n    top: 0px;\n    left: 0px;\n`;\n\nexport const LinksContainer = styled.div`\n    top: ${props => props.location.top + 'px'};\n    left: ${props => props.location.left + 'px'};\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 120px;\n    height: 35px;\n    background-color: ${DALLAS_BLUE};\n    box-shadow: -1px 1px 4px 1px ${DALLAS_BLUE_TRANSPARENT};\n    border-radius: 4px;\n    padding-left: 5px;\n    padding-right: 5px;\n`\n\nexport const RotatedSquare = styled.div`\n    background: ${DALLAS_BLUE};\n    transform: rotate(45deg);\n    width: 25px;\n    height: 25px;\n    position: absolute;\n    top: ${props => props.location.top + 15 + 'px'};\n    left: ${props => props.location.left + 50 + 'px'};\n`\n","/*!\n* ShareTooltip Component\n* license: MIT\n* author: Luis H. Ball Jr. <luisball@hey.com>\n* heavily inspired by: Share Selected Text, url: https://github.com/VincentLoy/share-selected-text\n*/\n\nimport React, { useState, useEffect } from 'react'\n\nimport { useSelection } from \"../../utils/useSelection\"\nimport {\n    createShareLink,\n    TooltipContainer,\n    LinksContainer,\n    RotatedSquare } from \"./tooltip-helpers\"\n\n// constants\nconst TOOLTIP_HEIGHT = 35;\nconst FACTOR = 1.33;\n\nconst ShareTooltip = ({ postTitle, postDescription }) => {\n    const selected = useSelection();\n    const [location, setLocation] = useState({top: '', left: ''});\n    const [pageUrl, setPageUrl] = useState('');\n    const [shareApi, setShareApi] = useState({supported: false, navigator: null});\n\n    // store the page url\n    useEffect(() => {\n        setPageUrl(window.location.href)\n        setShareApi({supported: !!navigator.share, navigator: navigator, clicked: false})\n    }, [])\n\n    // whenever selection changes calculate new top & left offsets\n    useEffect(() => {\n        const position = document.documentElement.scrollTop || document.body.scrollTop;\n        const body = document.querySelector('body');\n\n        if (selected && selected.text.length) {\n            let range = selected.selection.getRangeAt(0);\n            let rect = range.getBoundingClientRect();\n            setLocation({\n                top: position + rect.top - TOOLTIP_HEIGHT * FACTOR,\n                left: rect.left + rect.width / 2 - body.getBoundingClientRect().width / 12,\n            })\n        }\n\n    }, [selected])\n\n    // open share window on icon click\n    const shareLink = (e, type) => {\n        e.preventDefault();\n        const url = e.currentTarget.href;\n\n        if (type === 'shareButton') {\n            navigator.share({ url: pageUrl, title: postTitle })\n        } else {\n            const windowFeatures = 'status=no,menubar=no,location=no,scrollbars=no,width=720,height=540';\n            window.open(url, 'Share this post', windowFeatures);\n        }\n    }\n\n    // if no current selection render nothing\n    if (!selected || !selected.text || !selected.text.length || selected.text.length < 1) {\n        return null;\n    }\n\n    return (\n        <TooltipContainer className={`share-tooltip-container ${selected ? '' : 'hidden'}`}>\n            <RotatedSquare location={location}/>\n            <LinksContainer location={location}>\n                <a href={createShareLink('twitter', postTitle, postDescription, selected.text, pageUrl)} onClick={(e) => shareLink(e)}>\n                    <p style={{ marginTop: 10, color: 'white' }}>\n                        <span className=\"emoji\" aria-label=\"twitter\" role=\"img\">🐦</span>\n                    </p>\n                </a>\n                <a href={createShareLink('email', postTitle, postDescription, selected.text, pageUrl)} onClick={(e) => shareLink(e)}>\n                    <p style={{ marginTop: 10, color: 'white' }}>\n                        <span className=\"emoji\" aria-label=\"email\" role=\"img\">✉️</span>\n                    </p>\n                </a>\n                {shareApi.supported && \n                <a href={createShareLink('email', postTitle, postDescription, selected.text, pageUrl)} onClick={(e) => shareLink(e, 'shareButton')}>\n                    <p style={{ marginTop: 10, color: 'white' }}>\n                        <span className=\"emoji\" aria-label=\"email\" role=\"img\">🧰</span>\n                    </p>\n                </a>}\n            </LinksContainer>\n        </TooltipContainer>\n    )\n}\n\nexport default ShareTooltip\n","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport Bio from \"../components/bio\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport { rhythm, scale } from \"../utils/typography\"\nimport ShareTooltip from \"../components/share-tooltip/share-tooltip\";\n\nimport './blog-post.css'\n\nconst BlogPostTemplate = ({ data, pageContext, location }) => {\n  const post = data.markdownRemark\n  const siteTitle = data.site.siteMetadata.title\n  const { previous, next } = pageContext\n\n  return (\n    <Layout location={location} title={siteTitle}>\n      <SEO\n        title={post.frontmatter.title}\n        description={post.frontmatter.description || post.excerpt}\n      />\n      <article>\n        <header>\n          <h1\n            style={{\n              marginTop: rhythm(1),\n              marginBottom: 0,\n            }}\n          >\n            {post.frontmatter.title}\n          </h1>\n          {/* <p>{JSON.stringify(selected)}</p> */}\n          <ShareTooltip postTitle={post.frontmatter.title} postDescription={post.frontmatter.description || post.excerpt}/>\n          <p\n            style={{\n              ...scale(-1 / 5),\n              display: `block`,\n              marginBottom: rhythm(1),\n            }}\n          >\n            {post.frontmatter.date}\n          </p>\n        </header>\n        <section dangerouslySetInnerHTML={{ __html: post.html }} />\n        <hr\n          style={{\n            marginBottom: rhythm(1),\n          }}\n        />\n        <footer>\n          <Bio />\n        </footer>\n      </article>\n\n      <nav>\n        <ul\n          style={{\n            display: `flex`,\n            flexWrap: `wrap`,\n            justifyContent: `space-between`,\n            listStyle: `none`,\n            padding: 0,\n          }}\n        >\n          <li>\n            {previous && (\n              <Link to={previous.fields.slug} rel=\"prev\">\n                ← {previous.frontmatter.title}\n              </Link>\n            )}\n          </li>\n          <li>\n            {next && (\n              <Link to={next.fields.slug} rel=\"next\">\n                {next.frontmatter.title} →\n              </Link>\n            )}\n          </li>\n        </ul>\n      </nav>\n    </Layout>\n  )\n}\n\nexport default BlogPostTemplate\n\nexport const pageQuery = graphql`\n  query BlogPostBySlug($slug: String!) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      excerpt(pruneLength: 160)\n      html\n      frontmatter {\n        title\n        date(formatString: \"MMMM DD, YYYY\")\n        description\n      }\n    }\n  }\n`\n"],"sourceRoot":""}