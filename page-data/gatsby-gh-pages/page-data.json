{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-gh-pages/","result":{"data":{"site":{"siteMetadata":{"title":"Luis Ball"}},"markdownRemark":{"id":"9a83acb9-2409-5cfa-b9d1-63ebd35ff002","excerpt":"I was recently updating my personal site whe all of a sudden I realized I’d managed to publish the repo’s  as the homepage. After a brief moment of panic, I…","html":"<p>I was recently updating my personal site whe all of a sudden I realized I’d managed to publish the repo’s <code class=\"language-text\">README.md</code> as the homepage. After a brief moment of panic, I remembered I’d recently transitioned over to using <a href=\"https://github.com/tschaub/gh-pages\"><code class=\"language-text\">gh-pages</code></a> package to manage my deploys.</p>\n<p>As it turns out, the suggested <code class=\"language-text\">package.json</code> deploy script in that package’s readme</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master\"</span></code></pre></div>\n<p>doesn’t account for people to publish GitHub pages to custom domains. Therefore, every deploy would erase the <code class=\"language-text\">CNAME</code> file in the root directory since this is not automatically created by the <code class=\"language-text\">gastby build</code> script.</p>\n<p>Solution? Just adding <code class=\"language-text\">cp CNAME public</code> to the <code class=\"language-text\">deploy command</code> ensures we don’t delete the existing <code class=\"language-text\">CNAME</code> file on deploy. So our <code class=\"language-text\">package.json</code> scripts would end up looking something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token string\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token string\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; cp CNAME public &amp;&amp; gh-pages -d public -b master\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"How to publish a Gatsby site to GitHub Pages","date":"June 09, 2020","description":"Quick and dirty fix for custom domain publishing with Gatsby and gh-pages"}}},"pageContext":{"slug":"/gatsby-gh-pages/","previous":{"fields":{"slug":"/corss-browser-glass-navbar/"},"frontmatter":{"title":"How to make a cross-browser, blurred-glass menu bar"}},"next":{"fields":{"slug":"/the-problem-with-snack-bars/"},"frontmatter":{"title":"The problem with snack bars for managing notifications"}}}}}